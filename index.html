<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>LAB</title>

</head>

<body>
    <h1>Medidor de pasos 3</h1>
    <h2>Medicion: <span id="calculo"></span></h2>
    <p id="x"></p>
    <p id="y"></p>
    <p id="z"></p>

    <script>
        // Comprobamos si el navegador admite la API de DeviceMotionEvent
        if ("ondevicemotion" in window) {
            // La API está disponible

            // Variables para almacenar la velocidad y el tiempo
            var speed = 0;
            var lastTime = 0;

            // Manejador de eventos para obtener los datos de la aceleración lineal
            function handleMotionEvent(event) {
                // Obtenemos el tiempo actual
                var currentTime = Date.now();

                // Calculamos el intervalo de tiempo desde la última lectura
                var deltaTime = (currentTime - lastTime) / 1000; // Convertimos a segundos

                // Actualizamos el tiempo actual para la próxima lectura
                lastTime = currentTime;

                // Obtenemos los datos de la aceleración lineal
                var acceleration = event.accelerationIncludingGravity;

                // Calculamos la aceleración total sin la gravedad
                var accelerationWithoutGravity = {
                    x: acceleration.x - event.accelerationIncludingGravity.x,
                    y: acceleration.y - event.accelerationIncludingGravity.y,
                    z: acceleration.z - event.accelerationIncludingGravity.z
                };

                // Verificamos si la aceleración en el eje X (hacia adelante) es positiva
                if (accelerationWithoutGravity.x > 0) {
                    // Calculamos la velocidad estimada en el eje X
                    var estimatedSpeedX = accelerationWithoutGravity.x * deltaTime;

                    // Actualizamos la velocidad acumulada
                    speed += estimatedSpeedX;

                    // Mostramos la velocidad en la consola
                    calculo.textContent = speed + " m/s";
                }
            }

            // Asociamos el evento de DeviceMotion al manejador de eventos
            window.addEventListener("devicemotion", handleMotionEvent);
        } else {
            // La API de DeviceMotionEvent no está disponible
            alert("El acceso a la aceleración lineal no está disponible en este navegador o dispositivo.");
        }
    </script>
</body>

</html>