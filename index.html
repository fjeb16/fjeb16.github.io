<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>LAB</title>

</head>

<body>
    <h1>AbsoluteOrientationSensor 2</h1>
    <h3>Alpha: <span id="a"></span></h3>
    <h3>Beta: <span id="b"></span></h3>
    <h3>Gamma: <span id="g"></span></h3>
    <script>

        Promise.all([
            navigator.permissions.query({ name: "accelerometer" }),
            navigator.permissions.query({ name: "magnetometer" }),
            navigator.permissions.query({ name: "gyroscope" }),
        ]).then((results) => {
            if (results.every((result) => result.state === "granted")) {
                const options = { frequency: 60, referenceFrame: "device" };
                const sensor = new AbsoluteOrientationSensor(options);

                sensor.addEventListener("reading", () => {
                    // model is a Three.js object instantiated elsewhere.
                    alert("let's go");

                });
                sensor.addEventListener("error", (error) => {
                    if (event.error.name === "NotReadableError") {
                        alert("Sensor is not available.");
                    }
                });
                sensor.start();
                // â€¦
            } else {
                alert("No permissions to use AbsoluteOrientationSensor.");
            }
        });

    </script>
</body>

</html>
