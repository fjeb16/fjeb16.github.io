<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>LAB</title>

</head>

<body>
    <h1>rotationRate</h1>
    <h2>Medicion: <span id="calculo"></span></h2>
    <p id="x"></p>
    <p id="y"></p>
    <p id="z"></p>

    <script>
        // Comprobamos si el navegador admite la API de DeviceOrientationEvent
        if ("ondeviceorientation" in window) {
            // La API está disponible

            // Variables para almacenar la velocidad y el tiempo
            var speed = 0;
            var lastTime = 0;

            // Manejador de eventos para obtener los datos del giroscopio
            function handleOrientationEvent(event) {
                // Obtenemos el tiempo actual
                var currentTime = Date.now();

                // Calculamos el intervalo de tiempo desde la última lectura
                var deltaTime = (currentTime - lastTime) / 1000; // Convertimos a segundos

                // Actualizamos el tiempo actual para la próxima lectura
                lastTime = currentTime;

                // Obtenemos los datos de velocidad angular
                var rotationRate = event.rotationRate;

                // Calculamos la velocidad estimada en cada eje
                var estimatedSpeedX = rotationRate.beta;   // Velocidad en el eje X (cabeceo)
                var estimatedSpeedY = rotationRate.gamma;  // Velocidad en el eje Y (balanceo)
                var estimatedSpeedZ = rotationRate.alpha;  // Velocidad en el eje Z (guiñada)

                // Calculamos la velocidad lineal estimada
                var estimatedSpeed = Math.sqrt(
                    Math.pow(estimatedSpeedX, 2) +
                    Math.pow(estimatedSpeedY, 2) +
                    Math.pow(estimatedSpeedZ, 2)
                );

                // Actualizamos la velocidad acumulada
                speed += estimatedSpeed * deltaTime;

                // Mostramos la velocidad en la consola
                calculo.textContent = "Velocidad: " + speed + " m/s";
            }

            // Asociamos el evento de DeviceOrientation al manejador de eventos
            window.addEventListener("deviceorientation", handleOrientationEvent);
        } else {
            // La API de DeviceOrientationEvent no está disponible
            console.log("El acceso al giroscopio no está disponible en este navegador o dispositivo.");
        }
    </script>
</body>

</html>