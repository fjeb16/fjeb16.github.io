<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>LAB</title>

</head>

<body>
    <h1>test: <span id="calculo"></span></h1>

    <script>
        try {

            let distanciaTotal = 0;
            let velocidadInicial = { x: 0, y: 0, z: 0 };
            let tiempoInicial = null;

            window.addEventListener('devicemotion', function (event) {
                // Obtener los datos de aceleración
                const accelerationX = event.accelerationIncludingGravity.x;
                const accelerationY = event.accelerationIncludingGravity.y;
                const accelerationZ = event.accelerationIncludingGravity.z;

                // Obtener el tiempo actual
                const tiempoActual = new Date().getTime();

                // Si es la primera vez que se obtienen los datos, establecer el tiempo inicial
                if (tiempoInicial === null) {
                    tiempoInicial = tiempoActual;
                    return; // Salir de la función ya que no hay suficientes datos para calcular la distancia
                }

                // Calcular el tiempo transcurrido desde el inicio
                const tiempoTranscurrido = (tiempoActual - tiempoInicial) / 1000; // Convertir a segundos

                // Calcular la velocidad promedio en el intervalo utilizando la aceleración
                const velocidadPromedio = {
                    x: (velocidadInicial.x + accelerationX) / 2 * tiempoTranscurrido,
                    y: (velocidadInicial.y + accelerationY) / 2 * tiempoTranscurrido,
                    z: (velocidadInicial.z + accelerationZ) / 2 * tiempoTranscurrido
                };

                // Calcular la distancia recorrida en el intervalo utilizando la velocidad promedio
                const distanciaIntervalo = {
                    x: velocidadPromedio.x * tiempoTranscurrido,
                    y: velocidadPromedio.y * tiempoTranscurrido,
                    z: velocidadPromedio.z * tiempoTranscurrido
                };

                // Sumar la distancia del intervalo a la distancia total
                distanciaTotal += Math.sqrt(
                    distanciaIntervalo.x ** 2 +
                    distanciaIntervalo.y ** 2 +
                    distanciaIntervalo.z ** 2
                );

                // Actualizar la velocidad inicial y el tiempo inicial para el siguiente cálculo
                velocidadInicial = {
                    x: accelerationX,
                    y: accelerationY,
                    z: accelerationZ
                };
                tiempoInicial = tiempoActual;

                // Imprimir la distancia total recorrida en cada actualización
                calculo.textContent =  distanciaTotal;
            });

        } catch (error) {
            alert(error)
        }
    </script>
</body>

</html>